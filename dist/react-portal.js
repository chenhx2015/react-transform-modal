!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("react-dom"),require("prop-types")):"function"==typeof define&&define.amd?define(["exports","react","react-dom","prop-types"],t):t((e=e||self).reactPortal={},e.React,e.reactDom,e.PropTypes)}(this,(function(e,t,n,r){"use strict";var o="default"in t?t.default:t;function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?h(e):t}r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r;var b=27,m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(a,e);var t,r=(t=a,function(){var e,n=p(t);if(y()){var r=p(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return v(this,e)});function a(e){var t;return i(this,a),(t=r.call(this,e)).state={active:!!e.defaultOpen},t.open=t.open.bind(h(t)),t.close=t.close.bind(h(t)),t.handleOutsideMouseClick=t.handleOutsideMouseClick.bind(h(t)),t.handleKeydown=t.handleKeydown.bind(h(t)),t.refNode=o.createRef(),t}return c(a,[{key:"componentDidMount",value:function(){this.props.closeOnEsc&&document.addEventListener("keydown",this.handleKeydown),this.props.closeOnOutsideClick&&document.addEventListener("click",this.handleOutsideMouseClick),this.props.bindTo&&(this.portalNode=document.getElementById(this.props.bindTo)),this.portalNode||(this.portalNode=document.body)}},{key:"componentWillUnmount",value:function(){this.props.closeOnEsc&&document.removeEventListener("keydown",this.handleKeydown),this.props.closeOnOutsideClick&&document.removeEventListener("click",this.handleOutsideMouseClick)}},{key:"render",value:function(){if(!this.state.active)return null;var e=o.createElement("div",{ref:this.refNode,style:this.props.style,className:this.props.className},this.props.children);return n.createPortal(e,this.portalNode)}},{key:"open",value:function(e){if(!this.state.active){e&&e.nativeEvent&&e.nativeEvent.stopImmediatePropagation();var t=f({},this.state,{active:!0});this.setState(t,this.props.onOpen)}}},{key:"close",value:function(e){this.state.active&&(e&&e.nativeEvent&&e.nativeEvent.stopImmediatePropagation(),this.setState({active:!1},this.props.onClose))}},{key:"isOpen",value:function(){return this.state.active}},{key:"isOpening",value:function(){return this.state.active}},{key:"handleOutsideMouseClick",value:function(e){if(this.state.active){var t=this.refNode.current||this.portalNode;!t||t.contains(e.target)||e.button&&0!==e.button||this.close(e)}}},{key:"handleKeydown",value:function(e){e.keyCode===b&&this.state.active&&this.close(e)}}]),a}(o.Component);function O(){var e=t.useRef(null),n=t.useCallback((function(t){return e.current&&e.current.open(t)}),[e]),r=t.useCallback((function(t){return e.current&&e.current.close(t)}),[e]),i=t.useCallback((function(){return e.current&&e.current.isOpen()}),[e]),a=t.useCallback((function(t){return o.createElement(m,u({ref:e},t))}),[e]);return Object.assign({},{Portal:a,isOpen:i,open:n,close:r})}
/*!
   * isobject <https://github.com/jonschlinkert/isobject>
   *
   * Copyright (c) 2014-2017, Jon Schlinkert.
   * Released under the MIT License.
   */
/*!
   * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
   *
   * Copyright (c) 2014-2017, Jon Schlinkert.
   * Released under the MIT License.
   */
function k(e){return!0==(null!=(t=e)&&"object"==typeof t&&!1===Array.isArray(t))&&"[object Object]"===Object.prototype.toString.call(e);var t}function g(e){var t,n;return!1!==k(e)&&("function"==typeof(t=e.constructor)&&(!1!==k(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")))}m.defaultProps={onOpen:function(e){},onClose:function(e){},defaultOpen:!1,closeOnEsc:!0,closeOnOutsideClick:!0},m.propTypes={defaultOpen:r.bool,bindTo:r.string,closeOnEsc:r.bool,closeOnOutsideClick:r.bool,onOpen:r.func,onClose:r.func};var j=/[A-Z]/g,P=/^ms-/,w={};function E(e){return"-"+e.toLowerCase()}var C=function(e){return e&&Array.isArray(e)},x=function(e){return g(e)||C(e)},N=function(e,t){if(!e||e&&""===e.trim()||!g(t))return null;var n=Object.keys(t).map((function(e){return"".concat(function(e){if(w.hasOwnProperty(e))return w[e];var t=e.replace(j,E);return w[e]=P.test(t)?"-"+t:t}(e),": ").concat(t[e],";")}));return"".concat(e,"{").concat(n.join(""),"}")},R=function(e,t){var n=document.querySelector("style[".concat(e,'="').concat(t,'"]'));if(n)return n;var r=document.createElement("style");return r.type="text/css",r.setAttribute(e,t),document.head.appendChild(r),r},M=new(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e);var n={styleDataName:"data-keyframes"};this.keyframes={},this.options=f({},n,{},t)}return c(e,[{key:"createKeyframesString",value:function(e,t){if(!e||"string"!=typeof e||!x(t))return"";var n=C(t)?[]:{};return Object.keys(t).forEach((function(e){n[e]=t[e]})),function(e,t,n){if(!e||e&&""===e.trim()||!x(n))return null;var r=Object.keys(n).map((function(e){var t=n[e],r=e;if("number"==typeof e||/^\d+$/.test(e)){var o=n.length-1;r=0===e?"0%":e===o?"100%":"".concat(parseInt(e,10)/o*100,"%")}return N(r,t)}));return"@".concat(t," ").concat(e,"{").concat(r.join(""),"}")}(e,"keyframes",n)}},{key:"register",value:function(e,t){this.unregister(e);var n=this.options.styleDataName,r=this.createKeyframesString(e,t);if(""!==r){var o=R(n,e);null!=o&&(o.innerHTML=r,this.keyframes[e]=o)}}},{key:"unregister",value:function(e){if(this.contains(e)){var t=this.keyframes[e];t.parentNode.removeChild(t),delete this.keyframes[e]}}},{key:"unregisterAll",value:function(){var e=this;Object.keys(this.keyframes).forEach((function(t){return e.unregister(t)}))}},{key:"contains",value:function(e){return this.keyframes.hasOwnProperty(e)}}]),e}());e.Modal=function(){var e=O(),n=e.Portal,r=e.open,i=e.close,a=e.isOpen,c=t.useRef(null),s=t.useRef(null),u=t.useCallback((function(e){if(c.current){var t=c.current;return s.current=function(e,t){var n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),o=(n.left+n.right)/2-(r.left+r.right)/2,i=(n.top+n.bottom)/2-(r.top+r.bottom)/2;M.register("portalFadeIn",{"0%":{transform:"translate(".concat(o,"px, ").concat(i,"px) scale(0.1, 0.1) "),opacity:0},"50%":{transform:"translate(".concat(.25*o,"px, ").concat(.25*i,"px) scale(0.75, 0.75)"),opacity:.75},"100%":{opacity:1}}),M.register("portalFadeOut",{"0%":{opacity:1},"50%":{transform:"scale3d(0.5, 0.5, 0.5)",opacity:.5},"100%":{transform:"translate(".concat(o,"px, ").concat(i,"px) scale3d(0.01, 0.01, 0.01)"),opacity:0}});var a=R("data-portal-animation","portal-animation");return a&&(a.innerHTML=".portalFade {\n        animation: portalFadeIn 1s ease-out;\n    }"),function(){var e=R("data-portal-animation","portal-animation");e&&(e.innerHTML=".portalFade {\n          animation: portalFadeOut 1s ease-out;\n      }")}}(t,e.target),r(e)}return null}),[r]),l=t.useCallback((function(e){if(s.current){if(s.current(),e&&e.persist&&"function"==typeof e.persist&&e.persist(),c.current){var t=c.current;t.addEventListener("animationend",(function n(){t.removeEventListener("animationend",n),i(e)}))}}else i(e)}),[i]),f=t.useCallback((function(e){return e.bindTo?c.current=document.getElementById(e.bindTo):c.current=document.body,o.createElement(n,e,o.createElement("div",{tabIndex:-1,style:{position:"fixed",top:0,width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.5)"},className:"portalFade"},e.children))}));return Object.assign({},{Modal:f,isOpen:a,open:u,close:l})},e.default=m,e.usePortal=O,Object.defineProperty(e,"__esModule",{value:!0})}));
