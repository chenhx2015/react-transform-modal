!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("react-tiny-portal")):"function"==typeof define&&define.amd?define(["exports","react","react-tiny-portal"],t):t((e=e||self).reactPortal={},e.React,e.reactTinyPortal)}(this,(function(e,t,r){"use strict";var n="default"in t?t.default:t;function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}
/*!
   * isobject <https://github.com/jonschlinkert/isobject>
   *
   * Copyright (c) 2014-2017, Jon Schlinkert.
   * Released under the MIT License.
   */
/*!
   * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
   *
   * Copyright (c) 2014-2017, Jon Schlinkert.
   * Released under the MIT License.
   */
function s(e){return!0==(null!=(t=e)&&"object"==typeof t&&!1===Array.isArray(t))&&"[object Object]"===Object.prototype.toString.call(e);var t}function l(e){var t,r;return!1!==s(e)&&("function"==typeof(t=e.constructor)&&(!1!==s(r=t.prototype)&&!1!==r.hasOwnProperty("isPrototypeOf")))}var f=/[A-Z]/g,p=/^ms-/,y={};function d(e){return"-"+e.toLowerCase()}var m=function(e){return e&&Array.isArray(e)},b=function(e){return l(e)||m(e)},v=function(e,t){if(!e||e&&""===e.trim()||!l(t))return null;var r=Object.keys(t).map((function(e){return"".concat(function(e){if(y.hasOwnProperty(e))return y[e];var t=e.replace(f,d);return y[e]=p.test(t)?"-"+t:t}(e),": ").concat(t[e],";")}));return"".concat(e,"{").concat(r.join(""),"}")},g=function(e,t){var r=document.querySelector("style[".concat(e,'="').concat(t,'"]'));if(r)return r;var n=document.createElement("style");return n.type="text/css",n.setAttribute(e,t),document.head.appendChild(n),n},h=new(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e);var r={styleDataName:"data-keyframes"};this.keyframes={},this.options=u({},r,{},t)}var t,r,n;return t=e,(r=[{key:"createKeyframesString",value:function(e,t){if(!e||"string"!=typeof e||!b(t))return"";var r=m(t)?[]:{};return Object.keys(t).forEach((function(e){r[e]=t[e]})),function(e,t,r){if(!e||e&&""===e.trim()||!b(r))return null;var n=Object.keys(r).map((function(e){var t=r[e],n=e;if("number"==typeof e||/^\d+$/.test(e)){var a=r.length-1;n=0===e?"0%":e===a?"100%":"".concat(parseInt(e,10)/a*100,"%")}return v(n,t)}));return"@".concat(t," ").concat(e,"{").concat(n.join(""),"}")}(e,"keyframes",r)}},{key:"register",value:function(e,t){this.unregister(e);var r=this.options.styleDataName,n=this.createKeyframesString(e,t);if(""!==n){var a=g(r,e);null!=a&&(a.innerHTML=n,this.keyframes[e]=a)}}},{key:"unregister",value:function(e){if(this.contains(e)){var t=this.keyframes[e];t.parentNode.removeChild(t),delete this.keyframes[e]}}},{key:"unregisterAll",value:function(){var e=this;Object.keys(this.keyframes).forEach((function(t){return e.unregister(t)}))}},{key:"contains",value:function(e){return this.keyframes.hasOwnProperty(e)}}])&&o(t.prototype,r),n&&o(t,n),e}());e.default=function(){var e=r.usePortal(),a=e.Portal,o=e.open,i=e.close,c=e.isOpen,u=t.useRef(null),s=t.useRef(null),l=t.useCallback((function(e){if(u.current){var t=u.current;return s.current=function(e,t){var r=t.getBoundingClientRect(),n=e.getBoundingClientRect(),a=(r.left+r.right)/2-(n.left+n.right)/2,o=(r.top+r.bottom)/2-(n.top+n.bottom)/2;h.register("portalFadeIn",{"0%":{transform:"translate(".concat(a,"px, ").concat(o,"px) scale(0.1, 0.1) "),opacity:0},"100%":{opacity:1}}),h.register("portalFadeOut",{"0%":{opacity:1},"100%":{transform:"translate(".concat(a,"px, ").concat(o,"px) scale3d(0.01, 0.01, 0.01)"),opacity:0}});var i=g("data-portal-animation","portal-animation");return i&&(i.innerHTML=".portalFade {\n        animation: portalFadeIn 1s ease-out;\n    }"),function(){var e=g("data-portal-animation","portal-animation");e&&(e.innerHTML=".portalFade {\n          animation: portalFadeOut 1s ease-out;\n      }")}}(t,e.target),o(e)}return null}),[o]),f=t.useCallback((function(e){if(s.current){if(s.current(),e&&e.persist&&"function"==typeof e.persist&&e.persist(),u.current){var t=u.current;t.addEventListener("animationend",(function r(){t.removeEventListener("animationend",r),i(e)}))}}else i(e)}),[i]),p=t.useCallback((function(e){return e.bindTo?u.current=document.getElementById(e.bindTo):u.current=document.body,n.createElement(a,e,n.createElement("div",{tabIndex:-1,style:{position:"fixed",top:0,width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.5)"},className:"portalFade"},e.children))}));return Object.assign({},{Modal:p,isOpen:c,open:l,close:f})},Object.defineProperty(e,"__esModule",{value:!0})}));
